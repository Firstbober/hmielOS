var Ms=Object.defineProperty;var Us=(e,n,t)=>n in e?Ms(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var I=(e,n,t)=>(Us(e,typeof n!="symbol"?n+"":n,t),t);import{s as Ae}from"./fs.373cbe91.js";import{l as ks,s as re,a as ct}from"./std.2cba84a3.js";const u=SyntaxError,O=RangeError,g=TypeError,jt=RegExp,Wt=WeakMap,Bs=WeakMap.prototype.get,$n=WeakMap.prototype.set,D=Object.create,An=Number.isSafeInteger,Ps=Object.getOwnPropertyNames,k=Object.freeze,js=Object.prototype.isPrototypeOf,M=void 0,v=Object.seal?Object.preventExtensions(Object.create(null)):null,_e=Function.prototype.bind,Jt=RegExp.prototype.test,en=RegExp.prototype.exec,Dn=Reflect.apply,_t=Proxy,Ws=Object.defineProperty,pe=Object.assign,Gt=Object,Gs=Math.floor,Ys=Array.isArray,Le=1/0,Yt=String.fromCharCode,Hs=Array,De=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,zs=Function.prototype.apply;var Fn=tn.call.bind(tn),K=Gt.hasOwn||function(){return De.bind?De.call.bind(De):function(n,t){return De.call(n,t)}}(),Cn=Gt.create;function nn(e){var n=Cn(v);return K(e,"value")&&(n.value=e.value),K(e,"writable")&&(n.writable=e.writable),K(e,"get")&&(n.get=e.get),K(e,"set")&&(n.set=e.set),K(e,"enumerable")&&(n.enumerable=e.enumerable),K(e,"configurable")&&(n.configurable=e.configurable),n}/*!@preserve@license
 * 模块名称：j-regexp
 * 模块功能：可读性更好的正则表达式创建方式。从属于“简计划”。
   　　　　　More readable way for creating RegExp. Belong to "Plan J".
 * 模块版本：8.2.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-regexp/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-regexp/
 */var Nn=_e?_e.bind(Jt):function(e){return function(n){return Jt.call(e,n)}},Mn=_e?_e.bind(en):function(e){return function(n){return en.call(e,n)}};function Xs(e){var n=e.test=Nn(e),t=e.exec=Mn(e),s=n.source=t.source=e.source;return n.unicode=t.unicode=e.unicode,n.ignoreCase=t.ignoreCase=e.ignoreCase,n.multiline=t.multiline=s.indexOf("^")<0&&s.indexOf("$")<0?null:e.multiline,n.dotAll=t.dotAll=s.indexOf(".")<0?null:e.dotAll,e}function _(e){return Xs(e)}var sn=/[\n\t]+/g,qs=/\\./g;function Zs(e){return e==="\\`"?"`":e}var C="".includes?function(e,n){return e.includes(n)}:function(e,n){return e.indexOf(n)>-1};function le(e){for(var n=this.U,t=this.I,s=this.M,o=this.S,c=e.raw,r=c[0].replace(sn,""),l=1,f=arguments.length;l!==f;){var d=arguments[l];if(typeof d=="string")r+=d;else{var T=d.source;if(typeof T!="string")throw g("source");if(d.unicode===n)throw u("unicode");if(d.ignoreCase===t)throw u("ignoreCase");if(d.multiline===s&&(C(T,"^")||C(T,"$")))throw u("multiline");if(d.dotAll===o&&C(T,"."))throw u("dotAll");r+=T}r+=c[l++].replace(sn,"")}var p=jt(n?r=r.replace(qs,Zs):r,this.flags),x=p.test=Nn(p),m=p.exec=Mn(p);return x.source=m.source=r,x.unicode=m.unicode=!n,x.ignoreCase=m.ignoreCase=!t,x.multiline=m.multiline=C(r,"^")||C(r,"$")?!s:null,x.dotAll=m.dotAll=C(r,".")?!o:null,p}var Rs=_e&&_e.bind(le);function Tt(e){return{U:!C(e,"u"),I:!C(e,"i"),M:!C(e,"m"),S:!C(e,"s"),flags:e}}var on=Tt(""),h=_t?new _t(le,{apply:function(e,n,t){return Dn(e,on,t)},get:function(e,n){return Rs(Tt(n))},defineProperty:function(){return!1},preventExtensions:function(){return!1}}):function(){le.apply=le.apply;for(var e=function(){return le.apply(on,arguments)},n=1,t=n*2,s=t*2,o=s*2,c=s*2,r=c*2,l=r*2,f=l*2-1;f--;)(function(d){e[d.flags]=function(){return le.apply(d,arguments)}})(Tt((f&n?"":"d")+(f&t?"":"g")+(f&s?"":"i")+(f&o?"":"m")+(f&c?"":"s")+(f&r?"":"u")+(f&l?"":"y")));return k?k(e):e}(),Vs="$_"in jt?function(){var e=/^/;return e.test=e.test,function(t){return e.test(""),t}}():function(n){return n},Un=Vs,Ks=/^[$()*+\-.?[\\\]^{|]/,Qs=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/,kn=D(v);function Js(e,n,t){for(var s=D(v),o=n?Bn:Pn,c=e.length,r=0;r<c;++r)o(s,e[r]);return jn(s,!t)}function Bn(e,n){if(n){var t=Qs.test(n)?n.slice(0,2):n.charAt(0);Bn(e[t]||(e[t]=D(v)),n.slice(t.length))}else e[""]=kn}function Pn(e,n){if(n){var t=n.charAt(0);Pn(e[t]||(e[t]=D(v)),n.slice(1))}else e[""]=kn}function jn(e,n){var t=[],s=[],o=!0;for(var c in e)if(c){var r=jn(e[c],n);n&&Ks.test(c)&&(c="\\"+c),r?t.push(c+r):s.push(c)}else o=!1;return s.length&&t.unshift(s.length===1?s[0]:"["+s.join("")+"]"),t.length===0?"":(t.length===1&&(s.length||o)?t[0]:"(?:"+t.join("|")+")")+(o?"":"?")}const oe=WeakSet,$e=WeakSet.prototype.has,we=WeakSet.prototype.add,eo=WeakSet.prototype.delete,Wn=Object.keys,Pe=Object.getOwnPropertySymbols,R=function(){var e=Object.assign||function(o,c){var r,l,f;for(r=Wn(c),l=0;l<r.length;++l)f=r[l],o[f]=c[f];if(Pe)for(r=Pe(c),l=0;l<r.length;++l)f=r[l],Fn(c,f)&&(o[f]=c[f]);return o};function n(s){return delete s.prototype.constructor,k(s.prototype),s}function t(s){return s===M?this:typeof s=="function"?n(s):e(Cn(v),s)}return delete t.name,t.prototype=null,k(t),t}(),rn=Object.is,to=Object.defineProperties,no=Object.fromEntries,so=Reflect.construct,cn=Reflect.defineProperty,oo=Reflect.deleteProperty,Gn=Reflect.ownKeys;/*!@preserve@license
 * 模块名称：j-orderify
 * 模块功能：返回一个能保证给定对象的属性按此后添加顺序排列的 proxy，即使键名是 symbol，或整数 string。从属于“简计划”。
   　　　　　Return a proxy for given object, which can guarantee own keys are in setting order, even if the key name is symbol or int string. Belong to "Plan J".
 * 模块版本：7.0.1
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-orderify/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-orderify/
 */const Yn=()=>[],Ht=()=>{const e=new Wt;return e.has=e.has,e.get=e.get,e.set=e.set,e},Ue=Ht(),Hn=Ht(),an=Ht(),ro=pe(D(v),{defineProperty:(e,n,t)=>{if(K(e,n))return cn(e,n,pe(D(v),t));if(cn(e,n,pe(D(v),t))){const s=Ue.get(e);return s[s.length]=n,!0}return!1},deleteProperty:(e,n)=>{if(oo(e,n)){const t=Ue.get(e),s=t.indexOf(n);return s<0||--t.copyWithin(s,s+1).length,!0}return!1},ownKeys:e=>Ue.get(e),construct:(e,n,t)=>ln(so(e,n,t)),apply:(e,n,t)=>ln(Dn(e,n,t))}),zn=(e,n)=>{Ue.set(e,n);const t=new _t(e,ro);return Hn.set(t,e),t},ln=e=>{if(Hn.has(e))return e;let n=an.get(e);return n||(n=zn(e,pe(Yn(),Gn(e))),an.set(e,n),n)},co=function(){function e(){throw g("Super constructor Null cannot be invoked with 'new'")}function n(){throw g("Super constructor Null cannot be invoked without 'new'")}const t=o=>(delete o.prototype.constructor,k(o.prototype),o);function s(o){return new.target?new.target===s?e():zn(this,Yn()):typeof o=="function"?t(o):n()}return s.prototype=null,Ws(s,"name",pe(D(v),{value:"",configurable:!1})),k(s),s}(),ao=WeakMap.prototype.has,Xn=new Wt,io=new oe,qn=ao.bind(Xn),he=$n.bind(Xn),zt=we.bind(io),lo=!0,Zn=new oe,Rn=we.bind(Zn),Vn=$e.bind(Zn),Kn=new oe,Qn=we.bind(Kn),uo=eo.bind(Kn),fo=e=>uo(e)?(zt(e),!0):!1,wt=!0,je=!1,Jn=new oe,es=we.bind(Jn),ts=$e.bind(Jn),un=!0,fn=R(class extends R{constructor(n,t){return super(),Rn(this),n?t?he(this,!0):zt(this):(t?es:Qn)(this),this}}),po=R(class extends co{constructor(n,t){return super(),Rn(this),n?t?he(this,!0):zt(this):(t?es:Qn)(this),this}}),E=Error,Xt=[];let We="",G=Xt,qt=-1,Y=-1;const a=e=>{throw e},ho=/\r?\n/,go=(e,n)=>{if(typeof n!="string")throw g("TOML.parse({ path })");We=n,G=e.split(ho),qt=G.length-1,Y=-1},_o=()=>G[++Y],To=()=>Y!==qt;class Qe{constructor(n,t){I(this,"lineIndex",Y);I(this,"type");I(this,"restColumn");return this.type=n,this.restColumn=t,this}must(){return Y===qt&&a(u(`${this.type} is not close until the end of the file`+i(", which started from ",this.lineIndex,G[this.lineIndex].length-this.restColumn+1))),G[++Y]}nowrap(n){throw a(E(`TOML.parse(${n?`${n}multilineStringJoiner`:",{ joiner }"}) must be passed, while the source including multi-line string`+i(", which started from ",this.lineIndex,G[this.lineIndex].length-this.restColumn+1)))}}const i=(e,n=Y,t=0)=>G===Xt?"":We?`
    at (${We}:${n+1}:${t})`:`${e}line ${n+1}: ${G[n]}`,wo=()=>{We="",G=Xt},F=/[ \t]/,y=h`
	^${F}+`.valueOf(),{exec:ns}=h.s`
	^
	(
		(?:\d\d\d\d-\d\d-\d\d \d)?
		[\w\-+.:]+
	)
	${F}*
	(.*)
	$`.valueOf(),{exec:Eo}=h.s`
	^
	'([^']*)'
	${F}*
	(.*)`.valueOf(),{exec:xo}=h.s`
	^
	(.*?)
	'''('{0,2})
	${F}*
	(.*)`.valueOf(),{exec:ke}=h.s`
	^
	(.*?)
	'''()
	${F}*
	(.*)`.valueOf();let ee=ke;const U=h.s`
	^
	.
	${F}*`.valueOf(),Zt=/[^\x00-\x1F"#'()<>[\\\]`{}\x7F]+/,{exec:Oo}=h.s`
	^
	${F}*
	=
	${F}*
	(?:
		<(${Zt})>
		${F}*
	)?
	(.*)
	$`.valueOf(),{exec:yo}=h.s`
	^
	<(${Zt})>
	${F}*
	(.*)
	$`.valueOf(),{exec:bo}=h.s`
	^
	<(${Zt})>
	${F}*
	(.*)
	$`.valueOf(),dn=_(/[^\\"]+|\\.?|"(?!"")"?/sy),at=e=>{let n=0;for(;dn.test(e);)n=dn.lastIndex;return n},ss=/[^\\\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,mo=/[^\\\x00-\x09\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,Io=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,Lo=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\/]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;let xe=ss;const Ee=e=>!e.replace(xe,""),So=_(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),vo=_(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),$o=_(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),os=_(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\/]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);let te=os;const rs=e=>{let n=te.lastIndex=1;for(;te.test(e);)n=te.lastIndex;return n!==e.length&&e[n]==='"'||a(u("Bad basic string"+i(" at "))),n},{test:Ao}=_(/^[ \t]*\./),Do=/^[ \t]*\.[ \t]*/,{exec:it}=_(/^[\w-]+/),{exec:cs}=_(/^[^ \t#=[\]'".]+(?:[ \t]+[^ \t#=[\]'".]+)*/);let Oe=cs;const{exec:pn}=_(/^'[^'\x00-\x08\x0B-\x1F\x7F]*'/),{exec:Et}=_(/^'[^'\x00-\x08\x0B-\x1F]*'/);let ye=Et,be=!0;const Fo=(e,n)=>{const t=e[1]==="[";t?(be||a(u("Array of Tables is not allowed before TOML v0.2"+i(", which at "))),e=e.slice(2)):e=e.slice(1),e=e.replace(y,"");const{leadingKeys:s,finalKey:o}={lineRest:e}=n(e);e=e.replace(y,""),e&&e[0]==="]"||a(u("Table header is not closed"+i(", which is found at "))),(e.length>1?e[1]==="]"===t:!t)||a(u("Square brackets of Table definition statement not match"+i(" at "))),e=e.slice(t?2:1).replace(y,"");let c;return e&&e[0]==="<"?{1:c,2:e}=bo(e)??a(u("Bad tag"+i(" at "))):c="",{leadingKeys:s,finalKey:o,asArrayItem:t,tag:c,lineRest:e}},Co=({leadingKeys:e,finalKey:n,lineRest:t})=>{const{1:s=""}={2:t}=Oo(t)??a(u("Keys must equal something"+i(", but missing at ")));return s||t&&t[0]!=="#"||a(u("Value can not be missing after euqal sign"+i(", which is found at "))),{leadingKeys:e,finalKey:n,tag:s,lineRest:t}},{test:xt}=_(/[\x00-\x08\x0B-\x1F\x7F]/),{test:hn}=_(/[\x00-\x08\x0B-\x1F]/);let de=xt;const No=e=>{switch(e){case 1:ee=xo,ye=pn,de=xt,xe=ss,te=So,Oe=it,be=!0;break;case .5:ee=ke,ye=pn,de=xt,xe=mo,te=vo,Oe=it,be=!0;break;case .4:ee=ke,ye=Et,de=hn,xe=Io,te=$o,Oe=it,be=!0;break;default:ee=ke,ye=Et,de=hn,xe=Lo,te=os,Oe=cs,be=!1}},gn=h`
	(?:
		0
		(?:
			b[01][_01]*
		|
			o[0-7][_0-7]*
		|
			x[\dA-Fa-f][_\dA-Fa-f]*
		|
			(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
		)
	|
		[1-9][_\d]*
		(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
	|
		inf
	|
		nan
	)
`.valueOf(),{test:Mo}=h`
	^(?:
		-?${gn}
		(?:-${gn})*
	|
		true
	|
		false
	)$
`.valueOf(),{test:Uo}=h`_(?![\dA-Fa-f])`.valueOf(),ko=e=>Mo(e)&&!Uo(e);let N=!0,w="",Z=null,Ie=!0,Ot=0,yt=0;const Rt={test:()=>!0},Bo=class extends jt{constructor(n){super(`^${Js(n)}$`);let t=-1;for(let s=n.length;s;){const{length:o}=n[--s];o>t&&(t=o)}return this.lastIndex=t+1,this}test(n){return n.length<this.lastIndex&&super.test(n)}},Po=js.bind(k(Bo.prototype));let Se=Rt,b,X,q,L,Q,bt,J,B,Ge,ve,mt,Ye,as;const is=new Wt,jo=Bs.bind(is),Wo=$n.bind(is),A=()=>{const e=n=>{const t=jo(n);return t?t===e||a(g("Types in Array must be same"+i(". Check "))):Wo(n,e),n};return e},Go={asNulls:A(),asStrings:A(),asTables:A(),asArrays:A(),asBooleans:A(),asFloats:A(),asIntegers:A(),asOffsetDateTimes:A(),asLocalDateTimes:A(),asLocalDates:A(),asLocalTimes:A()},Yo=e=>e;let It,He,Lt,St,ze,vt,$t,At,Dt,Ft,Ct,Vt=null,ge=null;const Ho=(e,n,t,s)=>{const o=D(v);o._linked=ge,o.tag=e,t&&(o.table=t,o.key=s),n&&(o.array=n,o.index=n.length),ge=o},Nt=()=>{throw a(u("xOptions.tag is not enabled, but found tag syntax"+i(" at ")))};let ne=Nt;const zo=()=>{if(ge){const e=Vt;let n=ge;return ge=null,()=>{const t=e;let s=n;n=null;do t(s);while(s=s._linked)}}return null},Xo=()=>{Se=Rt,Z=Vt=ge=null,X=!1},qo=(e,n,t,s,o,c)=>{w=c;let r;switch(e){case 1:N=r=L=J=q=!0,X=Q=!1;break;case .5:N=L=J=q=!0,r=X=Q=!1;break;case .4:N=Q=q=!0,r=X=L=J=!1;break;case .3:N=Q=!0,r=X=L=J=q=!1;break;case .2:X=Q=!0,N=r=L=J=q=!1;break;case .1:X=Q=!0,N=r=L=J=q=!1;break;default:throw O("TOML.parse(,specificationVersion)")}if(No(e),typeof n=="string")Z=n;else if(n===M)Z=null;else throw g(`TOML.parse(${w?`${w}multilineStringJoiner`:",{ joiner }"})`);if(t===M||t===!0)Ie=!0;else if(t===!1)Ie=!1;else{if(typeof t!="number")throw g(`TOML.parse(${w?`${w},useBigInt`:",{ bigint }"})`);if(!An(t))throw O(`TOML.parse(${w?`${w},useBigInt`:",{ bigint }"})`);Ie=null,t>=0?Ot=-(yt=t):yt=-(Ot=t)-1}if(s==null)Se=Rt;else{if(!Po(s))throw g("TOML.parse(,{ keys })");Se=s}if(o==null)B=fn,bt=Ge=ve=mt=!1,ne=Nt;else{if(typeof o!="object")throw g(`TOML.parse(${w?`${w},,xOptions`:",{ x }"})`);{const{order:l,longer:f,exact:d,null:T,multi:p,comment:x,string:m,literal:H,tag:ot,...Ns}=o,rt=Ps(Ns);if(rt.length)throw g(`TOML.parse(${w?`${w},,{ ${rt.join(", ")} }`:`,{ x: { ${rt.join(", ")} } }`})`);if(B=l?po:fn,Ge=!f,bt=!!d,ve=!!T,mt=!!p,Ye=!!x,as=!!m,b=!!H,ot){if(typeof ot!="function")throw g(`TOML.parse(${w?`${w},,{ tag }`:",{ x: { tag } }"})`);if(!r)throw g(`TOML.parse(${w?`${w},,xOptions`:",{ x }"}) xOptions.tag needs at least TOML 1.0 to support mixed type array`);Vt=ot,ne=Ho}else ne=Nt}}r?It=He=Lt=St=ze=vt=$t=At=Dt=Ft=Ct=Yo:{asNulls:It,asStrings:He,asTables:Lt,asArrays:St,asBooleans:ze,asFloats:vt,asIntegers:$t,asOffsetDateTimes:At,asLocalDateTimes:Dt,asLocalDates:Ft,asLocalTimes:Ct}=Go},Zo=ArrayBuffer.isView,Ro=function(){if(typeof ArrayBuffer=="function"){var e=zs.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get);return function(t){try{e(t)}catch{return!1}return!0}}return function(){return!1}}(),Vo=TextDecoder,$=Symbol,lt=$("previous"),Ko=e=>{let n=e,t=n.next();if(!t.done)for(t.value[lt]=n,t=(n=t.value).next();;)if(t.done){if(n===e)break;n=n[lt],t=n.next(t.value)}else t.value[lt]=n,t=(n=t.value).next();return t.value},Qo=$("_literal"),S=(e,n)=>{const t=Gt(n);return t[Qo]=e,t},ls=new oe,Jo=we.bind(ls),us=$e.bind(ls),er=!1,tr=!0,fs=new oe,nr=we.bind(fs),ds=$e.bind(fs),ps=e=>{const n=[];return Jo(n),e&&nr(n),n},Xe=Date,sr=Date.parse,or=Object.preventExtensions,rr=Object.getOwnPropertyDescriptors,cr=function(n,t){for(var s=D(v),o=Wn(t),c=o.length,r=0;r<c;++r){var l=o[r];s[l]=nn(t[l])}if(Pe){var f=Pe(t);for(c=f.length,r=0;r<c;++r){var d=f[r];Fn(t,d)&&(s[d]=nn(t[d]))}}return to(n,s)},Je=e=>(k(k(e).prototype),e),ar=/(?:0[1-9]|1\d|2\d)/,_n=/(?:0[1-9]|[12]\d|30)/,Tn=/(?:0[1-9]|[12]\d|3[01])/,hs=/(?:[01]\d|2[0-3])/,Mt=/[0-5]\d/,et=h`
	\d\d\d\d-
	(?:
		0
		(?:
			[13578]-${Tn}
			|
			[469]-${_n}
			|
			2-${ar}
		)
		|
		1
		(?:
			[02]-${Tn}
			|
			1-${_n}
		)
	)
`.valueOf(),tt=h`
	${hs}:${Mt}:${Mt}
`.valueOf(),ir=/(?:[Zz]|[+-]\d\d:\d\d)$/,{exec:lr}=_(/(([+-])\d\d):(\d\d)$/),{exec:ur}=h`
	^
	${et}
	[Tt ]
	${tt}
	(?:\.\d{1,3}(\d*?)0*)?
	(?:[Zz]|[+-]${hs}:${Mt})
	$`.valueOf(),{exec:fr}=h`
	^
	${et}
	[Tt ]
	${tt}
	()
	[Zz]
	$`.valueOf(),{test:dr}=h`
	^
	${et}
	[Tt ]
	${tt}
	(?:\.\d+)?
	$`.valueOf(),{test:pr}=h`
	^
	${et}
	$`.valueOf(),{test:hr}=h`
	^
	${tt}
	(?:\.\d+)?
	$`.valueOf(),gs=/[ t]/,gr=/[-T:.]/g,_s=/\.?0+$/,_r=/\.(\d*?)0+$/,Tr=(e,n)=>n,nt=(()=>{const e=function(){return this},n=R(null);{const t=R(null);for(const s of Gn(Xe.prototype))s==="constructor"||s==="toJSON"||(n[s]=t)}return e.prototype=or(D(Xe.prototype,n)),k(e)})(),V=e=>e.replace(_r,Tr).replace(gr,""),wn=/./gs,En=e=>"\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009"[e],wr=(e,n)=>e<0?(""+(e+6216730554e4)).replace(wn,En).padStart(14,"\u2000")+n.replace(wn,En)+e:n?(e+".").padStart(16,"0")+n:(""+e).padStart(15,"0"),Kt=e=>{if(e.startsWith("02-29",5)){const n=+e.slice(0,4);return n&3?!1:n%100?!0:n%400?!1:!!(n%3200)}return!0},{test:Er}=h.s`^.....(?:06.30|12.31).23:59:59`.valueOf(),qe=cr(new Xe(0),rr(Xe.prototype)),Fe=$("OffsetDateTime_ISOString"),me=$("OffsetDateTime_value"),z=(e,n=0)=>(qe.setTime(+e[me]+n),qe);var Rr,Vr,In;const Ts=Je((In=class extends nt{constructor(t){Kt(t)||a(u(`Invalid Offset Date-Time ${t}`+i(" at ")));const s=t.startsWith("60",17);let o=s?t.slice(0,17)+"59"+t.slice(19):t;const{1:c}=(X?fr(o):ur(o))??a(u(`Invalid Offset Date-Time ${t}`+i(" at "))),r=sr(o=o.replace(gs,"T").replace("z","Z"));s&&(qe.setTime(r),Er(qe.toISOString())||a(u(`Invalid Offset Date-Time ${t}`+i(" at "))));super();I(this,Rr);I(this,Vr);return this[Fe]=o,this[me]=wr(r,c),this}valueOf(){return this[me]}toISOString(){return this[Fe]}getUTCFullYear(){return z(this).getUTCFullYear()}getUTCMonth(){return z(this).getUTCMonth()}getUTCDate(){return z(this).getUTCDate()}getUTCHours(){return z(this).getUTCHours()}getUTCMinutes(){return z(this).getUTCMinutes()}getUTCSeconds(){return z(this).getUTCSeconds()}getUTCMilliseconds(){return z(this).getUTCMilliseconds()}getUTCDay(){return z(this).getUTCDay()}getTimezoneOffset(){const t=lr(this[Fe]);return t?+t[1]*60+ +(t[2]+t[3]):0}getTime(){return Gs(+this[me])}},Rr=Fe,Vr=me,In)),j=$("LocalDateTime_ISOString"),ue=$("LocalDateTime_value"),ce=(e,n,t)=>+e[j].slice(n,t),ae=(e,n,t,s)=>{const o=""+s,c=t-n;if(o.length>c)throw O();e[ue]=V(e[j]=e[j].slice(0,n)+o.padStart(c,"0")+e[j].slice(t))};var Kr,Qr,Ln;const ws=Je((Ln=class extends nt{constructor(t){dr(t)&&Kt(t)||a(u(`Invalid Local Date-Time ${t}`+i(" at ")));super();I(this,Kr);I(this,Qr);return this[ue]=V(this[j]=t.replace(gs,"T")),this}valueOf(){return this[ue]}toISOString(){return this[j]}getFullYear(){return ce(this,0,4)}setFullYear(t){ae(this,0,4,t)}getMonth(){return ce(this,5,7)-1}setMonth(t){ae(this,5,7,t+1)}getDate(){return ce(this,8,10)}setDate(t){ae(this,8,10,t)}getHours(){return ce(this,11,13)}setHours(t){ae(this,11,13,t)}getMinutes(){return ce(this,14,16)}setMinutes(t){ae(this,14,16,t)}getSeconds(){return ce(this,17,19)}setSeconds(t){ae(this,17,19,t)}getMilliseconds(){return+this[ue].slice(14,17).padEnd(3,"0")}setMilliseconds(t){this[ue]=V(this[j]=this[j].slice(0,19)+(t?("."+(""+t).padStart(3,"0")).replace(_s,""):""))}},Kr=j,Qr=ue,Ln)),se=$("LocalDate_ISOString"),Be=$("LocalDate_value"),ut=(e,n,t)=>+e[se].slice(n,t),ft=(e,n,t,s)=>{const o=""+s,c=t-n;if(o.length>c)throw O();e[Be]=V(e[se]=e[se].slice(0,n)+o.padStart(c,"0")+e[se].slice(t))};var Jr,ec,Sn;const Es=Je((Sn=class extends nt{constructor(t){pr(t)&&Kt(t)||a(u(`Invalid Local Date ${t}`+i(" at ")));super();I(this,Jr);I(this,ec);return this[Be]=V(this[se]=t),this}valueOf(){return this[Be]}toISOString(){return this[se]}getFullYear(){return ut(this,0,4)}setFullYear(t){ft(this,0,4,t)}getMonth(){return ut(this,5,7)-1}setMonth(t){ft(this,5,7,t+1)}getDate(){return ut(this,8,10)}setDate(t){ft(this,8,10,t)}},Jr=se,ec=Be,Sn)),W=$("LocalTime_ISOString"),fe=$("LocalTime_value"),dt=(e,n,t)=>+e[W].slice(n,t),pt=(e,n,t,s)=>{const o=""+s,c=t-n;if(o.length>c)throw O();e[fe]=V(e[W]=e[W].slice(0,n)+o.padStart(2,"0")+e[W].slice(t))};var tc,nc,vn;const xs=Je((vn=class extends nt{constructor(t){hr(t)||a(u(`Invalid Local Time ${t}`+i(" at ")));super();I(this,tc);I(this,nc);return this[fe]=V(this[W]=t),this}valueOf(){return this[fe]}toISOString(){return this[W]}getHours(){return dt(this,0,2)}setHours(t){pt(this,0,2,t)}getMinutes(){return dt(this,3,5)}setMinutes(t){pt(this,3,5,t)}getSeconds(){return dt(this,6,8)}setSeconds(t){pt(this,6,8,t)}getMilliseconds(){return+this[fe].slice(6,9).padEnd(3,"0")}setMilliseconds(t){this[fe]=V(this[W]=this[W].slice(0,8)+(t?("."+(""+t).padStart(3,"0")).replace(_s,""):""))}},tc=W,nc=fe,vn)),Te=parseInt,Os=String.fromCodePoint,xr=/[^\\]+|\\(?:[\\"btnfr/]|u.{4}|U.{8})/gs,Or=/[^\n\\]+|\n|\\(?:[\t ]*\n[\t\n ]*|[\\"btnfr/]|u.{4}|U.{8})/gs,Ut=e=>{if(!e)return"";const n=e.match(xr),{length:t}=n;let s=0;do{const o=n[s];if(o[0]==="\\")switch(o[1]){case"\\":n[s]="\\";break;case'"':n[s]='"';break;case"b":n[s]="\b";break;case"t":n[s]="	";break;case"n":n[s]=`
`;break;case"f":n[s]="\f";break;case"r":n[s]="\r";break;case"u":const c=Te(o.slice(2),16);N&&55295<c&&c<57344&&a(O(`Invalid Unicode Scalar ${o}`+i(" at "))),n[s]=Yt(c);break;case"U":const r=Te(o.slice(2),16);(N&&55295<r&&r<57344||1114111<r)&&a(O(`Invalid Unicode Scalar ${o}`+i(" at "))),n[s]=Os(r);break;case"/":n[s]="/";break}}while(++s!==t);return n.join("")},xn=(e,n,t)=>{if(!e)return"";const s=e.match(Or),{length:o}=s;let c=0;do{const r=s[c];if(r===`
`)++t,s[c]=n;else if(r[0]==="\\")switch(r[1]){case`
`:case" ":case"	":for(let d=0;d=r.indexOf(`
`,d)+1;)++t;s[c]="";break;case"\\":s[c]="\\";break;case'"':s[c]='"';break;case"b":s[c]="\b";break;case"t":s[c]="	";break;case"n":s[c]=`
`;break;case"f":s[c]="\f";break;case"r":s[c]="\r";break;case"u":const l=Te(r.slice(2),16);N&&55295<l&&l<57344&&a(O(`Invalid Unicode Scalar ${r}`+i(" at ",Y+t))),s[c]=Yt(l);break;case"U":const f=Te(r.slice(2),16);(N&&55295<f&&f<57344||1114111<f)&&a(O(`Invalid Unicode Scalar ${r}`+i(" at ",Y+t))),s[c]=Os(f);break;case"/":s[c]="/";break}}while(++c!==o);return s.join("")},Ze=BigInt,ys=/[-+]?(?:0|[1-9][_\d]*)/,{test:yr}=h`_(?!\d)`.valueOf(),{test:br}=h`^${ys}$`.valueOf(),{test:mr}=_(/^0(?:x[\dA-Fa-f][_\dA-Fa-f]*|o[0-7][_0-7]*|b[01][_01]*)$/),{test:Ir}=h`_(?![\dA-Fa-f])`.valueOf(),bs=/_/g,Re=/_|^[-+]/g,Qt=e=>(br(e)||mr(e))&&!Ir(e),Lr=e=>{Qt(e)||a(u(`Invalid Integer ${e}`+i(" at ")));const n=e[0]==="-"?-Ze(e.replace(Re,"")):Ze(e.replace(Re,""));return Ge||-9223372036854775808n<=n&&n<=9223372036854775807n||a(O(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${e}`+i(" meet at "))),n},Sr=e=>{Qt(e)||a(u(`Invalid Integer ${e}`+i(" at ")));const n=Te(e.replace(bs,""));return An(n)||a(O(`Integer did not use BitInt must fit Number.isSafeInteger, not includes ${e}`+i(" meet at "))),n},Ve=e=>{if(Ie===!0)return Lr(e);if(Ie===!1)return Sr(e);Qt(e)||a(u(`Invalid Integer ${e}`+i(" at ")));const n=Te(e.replace(bs,""));if(Ot<=n&&n<=yt)return n;const t=e[0]==="-"?-Ze(e.replace(Re,"")):Ze(e.replace(Re,""));return Ge||-9223372036854775808n<=t&&t<=9223372036854775807n||a(O(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${e}`+i(" meet at "))),t},vr=isFinite,st=0/0,$r=-st,Ar=-Le,{test:Dr}=h`
	^
	${ys}
	(?:
		\.\d[_\d]*
		(?:[eE][-+]?\d[_\d]*)?
	|
		[eE][-+]?\d[_\d]*
	)
	$`.valueOf(),Fr=/_/g,{test:Cr}=_(/^[-+]?0(?:\.0+)?(?:[eE][-+]?0+)?$/),{exec:Nr}=_(/^[-0]?(\d*)(?:\.(\d+))?(?:e\+?(-?\d+))?$/),{exec:Mr}=_(/^[-+]?0?(\d*)(?:\.(\d*?)0*)?(?:[eE]\+?(-?\d+))?$/),Ke=e=>{if(!Dr(e)||yr(e)){if(J){if(e==="inf"||e==="+inf")return Le;if(e==="-inf")return Ar;if(e==="nan"||e==="+nan")return st;if(e==="-nan")return $r}throw a(u(`Invalid Float ${e}`+i(" at ")))}const n=e.replace(Fr,""),t=+n;if(bt){vr(t)||a(O(`Float ${e} has been as big as inf`+i(" at "))),t||Cr(n)||a(O(`Float ${e} has been as little as ${e[0]==="-"?"-":""}0`+i(" at ")));const{1:s,2:o="",3:c=""}=Nr(t),{1:r,2:l="",3:f=""}=Mr(n);r+l===s+o&&f-l.length===c-o.length||a(O(`Float ${e} has lost its exact and been ${t}`+i(" at ")))}return t},Ur=(e,n)=>{const{length:t}=n;let s=0;for(;s<t;){const o=n[s++];if(o in e)if(e=e[o],Vn(e))qn(e)&&a(E("Trying to define Table under Inline Table"+i(" at ")));else if(us(e))ds(e)&&a(E("Trying to append value to Static Array"+i(" at "))),e=e[e.length-1];else throw a(E("Trying to define Table under non-Table value"+i(" at ")));else{for(e=e[o]=new B(je);s<t;)e=e[n[s++]]=new B(je);return e}}return e},kr=(e,n,t,s)=>{let o;if(t){let c;n in e?us(c=e[n])&&!ds(c)||a(E("Trying to push Table to non-ArrayOfTables value"+i(" at "))):c=e[n]=ps(er),s&&ne(s,c,e,n),c[c.length]=o=new B(wt)}else n in e?(o=e[n],ts(o)&&a(E("A table defined implicitly via key/value pair can not be accessed to via []"+i(", which at "))),fo(o)||a(E("Duplicate Table definition"+i(" at ")))):e[n]=o=new B(wt),s&&ne(s,null,e,n);return o},Br=(e,n)=>{const{length:t}=n;let s=0;for(;s<t;){const o=n[s++];if(o in e)e=e[o],Vn(e)||a(E("Trying to assign property through non-Table value"+i(" at "))),qn(e)&&a(E("Trying to assign property through static Inline Table"+i(" at "))),ts(e)||a(E("A table defined implicitly via [] can not be accessed to via key/value pair"+i(", which at ")));else{for(e=e[o]=new B(je,un);s<t;)e=e[n[s++]]=new B(je,un);return e}}return e},ie=e=>(de(e)&&a(u("Control characters other than Tab are not permitted in a Literal String"+i(", which was found at "))),e),ms=(e,n,t)=>{if(!t.startsWith("'''")){const r=Eo(t)??a(u("Bad literal string"+i(" at "))),l=ie(r[1]);return e[n]=b?S(t.slice(0,l.length+2),l):l,r[2]}const s=ee(t.slice(3));if(s){const r=ie(s[1])+s[2];return e[n]=b?S(t.slice(0,r.length+6),r):r,s[3]}const o=new Qe("Multi-line Literal String",t.length),c=!(t=t.slice(3));if(c){t=o.must();const r=ee(t);if(r){const l=ie(r[1])+r[2];return e[n]=b?S(["'''",t.slice(0,l.length+3)],l):l,r[3]}}Z??o.nowrap(w);for(const r=[ie(t)];;){const l=o.must(),f=ee(l);if(f){r[r.length]=ie(f[1])+f[2];const d=r.join(Z);return b?(r[r.length-1]+="'''",c?r.unshift("'''"):r[0]=`'''${t}`,e[n]=S(r,d)):e[n]=d,f[3]}r[r.length]=ie(l)}},Is=(e,n,t)=>{if(!t.startsWith('"""')){const r=rs(t),l=Ut(t.slice(1,r));return e[n]=b?S(t.slice(0,r+1),l):l,t.slice(r+1).replace(y,"")}let s=3+at(t.slice(3));if(t.length!==s){const r=t.slice(3,s);Ee(r)||a(u("Bad multi-line basic string"+i(" at ")));const l=Ut(r)+(t.startsWith('"',s+=3)?t.startsWith('"',++s)?(++s,'""'):'"':"");return e[n]=b?S(t.slice(0,s),l):l,t.slice(s).replace(y,"")}const o=new Qe("Multi-line Basic String",s),c=(t=t.slice(3))?0:1;if(c){t=o.must();let r=at(t);if(t.length!==r){const l=t.slice(0,r);Ee(l)||a(u("Bad multi-line basic string"+i(" at ")));const f=xn(l,Z,c)+(t.startsWith('"',r+=3)?t.startsWith('"',++r)?(++r,'""'):'"':"");return e[n]=b?S(['"""',t.slice(0,r)],f):f,t.slice(r).replace(y,"")}}Z??o.nowrap(w),Ee(t+`
`)||a(u("Bad multi-line basic string"+i(" at ")));for(const r=[t];;){const l=o.must();let f=at(l);if(l.length!==f){const d=l.slice(0,f);Ee(d)||a(u("Bad multi-line basic string"+i(" at ")));const T=xn(r.join(`
`)+`
`+d,Z,c)+(l.startsWith('"',f+=3)?l.startsWith('"',++f)?(++f,'""'):'"':"");return b?(c?r.unshift('"""'):r[0]=`"""${t}`,r[r.length]=`${d}"""`,e[n]=S(r,T)):e[n]=T,l.slice(f).replace(y,"")}Ee(l+`
`)||a(u("Bad multi-line basic string"+i(" at "))),r[r.length]=l}},On=R(null),kt=e=>On[e]??(On[e]=$(e)),Pr=$("this"),{test:Ls}=_(ir),{test:jr}=_(/^\[[\t ]*]/),Ss=e=>{let n=e;const t=[];let s=-1;for(;;){if(n||a(u("Empty bare key"+i(" at "))),n[0]==='"'){const c=rs(n);Se.test(t[++s]=Ut(n.slice(1,c)))||a(E("Key not allowed"+i(" at "))),n=n.slice(c+1)}else{const c=n[0]==="'",r=((c?ye:Oe)(n)??a(u(`Bad ${c?"literal string":"bare"} key`+i(" at "))))[0];n=n.slice(r.length),Se.test(t[++s]=c?r.slice(1,-1):r)||a(E("Key not allowed"+i(" at ")))}if(Ao(n))n=n.replace(Do,"");else break}if(as){const c=e.slice(0,-n.length);(ko(c)||ve&&c==="null")&&a(u("Bad bare key disabled by xOptions.string"+i(" at ")))}if(Q){let c=s;do t[c]||a(u("Empty key is not allowed before TOML v0.5"+i(", which at ")));while(c--)}const o=t[s];return t.length=s,{leadingKeys:t,finalKey:o,lineRest:n}},Wr=(e,n)=>{if(n[0]==="<"){const{1:s}={2:n}=yo(n)??a(u("Bad tag "+i(" at ")));switch(ne(s,e,null),n&&n[0]){case",":case"]":case"":case"#":return e[e.length]=M,n}}switch(n[0]){case"'":return ms(He(e),e.length,n);case'"':return Is(He(e),e.length,n);case"{":return q||a(u("Inline Table is not allowed before TOML v0.4"+i(", which at "))),$s(Lt(e),e.length,n);case"[":return vs(St(e),e.length,n)}const{1:t}={2:n}=ns(n)??a(u("Bad atom value"+i(" at ")));return t==="true"?ze(e)[e.length]=!0:t==="false"?ze(e)[e.length]=!1:ve&&t==="null"?It(e)[e.length]=null:t.includes(":")?t.includes("-")?Ls(t)?At(e)[e.length]=new Ts(t):(L||a(u("Local Date-Time is not allowed before TOML v0.5"+i(", which at "))),Dt(e)[e.length]=new ws(t)):(L||a(u("Local Time is not allowed before TOML v0.5"+i(", which at "))),Ct(e)[e.length]=new xs(t)):t.indexOf("-")!==t.lastIndexOf("-")&&t[0]!=="-"?(L||a(u("Local Date is not allowed before TOML v0.5"+i(", which at "))),Ft(e)[e.length]=new Es(t)):t.includes(".")||t.includes("n")||(t.includes("e")||t.includes("E"))&&!t.startsWith("0x")?vt(e)[e.length]=b?S(t,Ke(t)):Ke(t):$t(e)[e.length]=b?S(t,Ve(t)):Ve(t),n},vs=function*(e,n,t){const s=e[n]=ps(tr);if(jr(t))return he(s,t[1]==="]"?0:3),t.slice(t.indexOf("]")).replace(U,"");const o=new Qe("Static Array",t.length);let c=t.startsWith("[ ")||t.startsWith("[	")?3:0;for(t=t.replace(U,"");!t||t[0]==="#";)c=null,t=o.must().replace(y,"");if(t[0]==="]")return c===null||he(s,c),t.replace(U,"");for(;;){const r=Wr(s,t);for(t=typeof r=="string"?r:yield r;!t||t[0]==="#";)c=null,t=o.must().replace(y,"");if(t[0]===","){for(t=t.replace(U,"");!t||t[0]==="#";)c=null,t=o.must().replace(y,"");if(t[0]==="]")break}else{if(t[0]==="]")break;throw a(u("Unexpect character in static array item value"+i(", which is found at ")))}}return c===null||he(s,c),t.replace(U,"")},$s=function*(e,n,t){const s=e[n]=new B(wt,lo);if(mt){const o=new Qe("Inline Table",t.length);t=t.replace(U,"");let c=!0;for(;;){for(;!t||t[0]==="#";)c=!1,t=o.must().replace(y,"");if(t[0]==="}")break;const r=Bt(s,t),l=Pt(r);if(t=typeof l=="string"?l:yield l,t){if(t[0]==="#"){Ye&&(r.table[kt(r.finalKey)]=t.slice(1)),c=!1;do t=o.must().replace(y,"");while(!t||t[0]==="#")}}else{c=!1;do t=o.must().replace(y,"");while(!t||t[0]==="#")}t[0]===","&&(t=t.replace(U,""))}c||he(s,!1)}else if(t=t.replace(U,"")||a(u("Inline Table is intended to appear on a single line"+i(", which broken at "))),t[0]!=="}")for(;;){t[0]==="#"&&a(u("Inline Table is intended to appear on a single line"+i(", which broken at ")));const o=Pt(Bt(s,t));if(t=(typeof o=="string"?o:yield o)||a(u("Inline Table is intended to appear on a single line"+i(", which broken at "))),t[0]==="}")break;t[0]===","&&(t=t.replace(U,"")||a(u("Inline Table is intended to appear on a single line"+i(", which broken at "))),t[0]==="}"&&a(u("The last property of an Inline Table can not have a trailing comma"+i(", which was found at "))))}return t.replace(U,"")},Bt=(e,n)=>{const{leadingKeys:t,finalKey:s,tag:o}={lineRest:n}=Co(Ss(n));return{table:Br(e,t),finalKey:s,tag:o,lineRest:n}},Pt=({finalKey:e,tag:n,lineRest:t,table:s})=>{if(e in s&&a(E("Duplicate property definition"+i(" at "))),n)switch(ne(n,null,s,e),t&&t[0]){case",":case"}":case"":case"#":return s[e]=M,t}switch(t&&t[0]){case"'":return ms(s,e,t);case'"':return Is(s,e,t);case"{":return q||a(u("Inline Table is not allowed before TOML v0.4"+i(", which at "))),$s(s,e,t);case"[":return vs(s,e,t)}const{1:o}={2:t}=ns(t)??a(u("Bad atom value"+i(" at ")));return o==="true"?s[e]=!0:o==="false"?s[e]=!1:ve&&o==="null"?s[e]=null:o.includes(":")?o.includes("-")?Ls(o)?s[e]=new Ts(o):(L||a(u("Local Date-Time is not allowed before TOML v0.5"+i(", which at "))),s[e]=new ws(o)):(L||a(u("Local Time is not allowed before TOML v0.5"+i(", which at "))),s[e]=new xs(o)):o.indexOf("-")!==o.lastIndexOf("-")&&o[0]!=="-"?(L||a(u("Local Date is not allowed before TOML v0.5"+i(", which at "))),s[e]=new Es(o)):s[e]=o.includes(".")||o.includes("n")||(o.includes("e")||o.includes("E"))&&!o.startsWith("0x")?b?S(o,Ke(o)):Ke(o):b?S(o,Ve(o)):Ve(o),t},Gr=()=>{const e=new B;let n=e;for(;To();){const t=_o().replace(y,"");if(t)if(t[0]==="["){const{leadingKeys:s,finalKey:o,asArrayItem:c,tag:r,lineRest:l}=Fo(t,Ss),f=Ur(e,s);l&&(l[0]==="#"||a(u("Unexpect charachtor after table header"+i(" at ")))),n=kr(f,o,c,r),Ye&&l&&(n[Pr]=c?l.slice(1):f[kt(o)]=l.slice(1))}else if(t[0]==="#")de(t)&&a(u("Control characters other than Tab are not permitted in comments"+i(", which was found at ")));else{const s=Bt(n,t);let o=Pt(s);typeof o=="string"||(o=Ko(o)),o&&(o[0]==="#"||a(u("Unexpect charachtor after key/value pair"+i(" at "))),Ye&&(s.table[kt(s.finalKey)]=o.slice(1)))}}return e};({...no([...Hs(32)].map((e,n)=>[Yt(n),"\\u"+n.toString(16).toUpperCase().padStart(4,"0")]))});const As=Float64Array,Ds=Uint8Array,yn=-Le,{test:Yr}=_(/^-?\d+$/),bn=e=>Yr(e)?e+".0":e,Fs=new As([st]),Cs=new Ds(Fs.buffer),mn=Cs[7];new Ds(new As([-st]).buffer)[7];const Hr=new oe,zr=$e.bind(Hr),Xr=new Vo("utf-8",R({fatal:!0,ignoreBOM:!1})),Ce=e=>{if(Zo(e)?e.length!==e.byteLength:!Ro(e))throw g("only Uint8Array or ArrayBuffer is acceptable");try{return Xr.decode(e)}catch{throw E("A TOML doc must be a (ful-scalar) valid UTF-8 file, without any unknown code point.")}},Ne=e=>"byteLength"in e,{test:qr}=_(/[\uD800-\uDFFF]/u),ht=e=>{if(Un(qr(e)))throw E("A TOML doc must be a (ful-scalar) valid UTF-8 file, without any uncoupled UCS-4 character code.")};let gt=!1;const P=(e,n,t,s,o,c)=>{let r="";if(typeof e=="object"&&e){if(Ys(e))throw g(zr(e)?"TOML.parse(array from TOML.stringify(,{newline?}))":"TOML.parse(array)");if(Ne(e))e=Ce(e);else{if(r=e.path,typeof r!="string")throw g("TOML.parse(source.path)");const{data:p,require:x=typeof require=="function"?require:M}=e;if(x){const m=x.resolve?.paths?.("")?.[0]?.replace(/node_modules$/,"");if(m&&(r=x("path").resolve(m,r),typeof r!="string"))throw g("TOML.parse(source.require('path').resolve)");if(p===M){const H=x("fs").readFileSync(r);if(typeof H=="object"&&H&&Ne(H))e=Ce(H);else throw g("TOML.parse(source.require('fs').readFileSync)")}else if(typeof p=="string")ht(e=p);else if(typeof p=="object"&&p&&Ne(p))e=Ce(p);else throw g("TOML.parse(source.data)")}else{if(p===M)throw g("TOML.parse(source.data|source.require)");if(typeof p=="string")ht(e=p);else if(typeof p=="object"&&p&&Ne(p))e=Ce(p);else throw g("TOML.parse(source.data)")}}}else if(typeof e=="string")ht(e);else throw g("TOML.parse(source)");let l,f;if(typeof t=="object"&&t){if(s!==M||o!==M)throw g("options mode ? args mode");l=t.joiner,s=t.bigint,f=t.keys,o=t.x,c=""}else l=t;let d,T;if(gt)throw E("parsing during parsing.");gt=!0;try{qo(n,l,s,f,o,c),go(e,r),e&&e[0]==="\uFEFF"&&a(g("TOML content (string) should not start with BOM (U+FEFF)"+i(" at "))),d=Gr(),T=zo()}finally{wo(),Xo(),gt=!1,Un()}return T?.(),d},Zr=pe((e,n,t,s,o)=>typeof n=="number"?P(e,n,t,s,o,",,"):P(e,1,n,t,s,","),{"1.0":(e,n,t,s)=>P(e,.1,n,t,s,","),1:(e,n,t,s)=>P(e,1,n,t,s,","),.5:(e,n,t,s)=>P(e,.5,n,t,s,","),.4:(e,n,t,s)=>P(e,.4,n,t,s,","),.3:(e,n,t,s)=>P(e,.3,n,t,s,","),.2:(e,n,t,s)=>P(e,.2,n,t,s,","),.1:(e,n,t,s)=>P(e,.1,n,t,s,",")}),Me=e=>{if(!e.ok)throw e.error;return e.value};ks().then(async()=>{let e=[],n={"boot.target":[]};const t=Me(await re.syscalls.opendir("/system/config/sysinit/unit")),s=Me(await re.syscalls.readdir(t));for(const c of s)c.type==Ae.entry.Type.File&&e.push(c.name);const o=new TextDecoder;for(const c of e){const r=Me(await re.syscalls.open("/system/config/sysinit/unit/shell.unit",Ae.open.AccessFlag.ReadOnly,Ae.open.StatusFlag.Normal,Ae.open.Type.Normal)),l=Me(await re.syscalls.read(r,-1,0));await re.syscalls.close(r);const f=o.decode(l),d=Zr(f,{useBigInt:!1});let T=d.Unit,p={name:T.Name,description:T.Description,exec:T.Exec},x=d.Unit.WantedBy;if(Object.values(p).includes(void 0)||x==null||T==null){await ct.print(`Unit file '${c}' is invalid. Skipping...`);continue}for(const[m,H]of Object.entries(n))m==x&&H.push(p)}await ct.print("Got",n["boot.target"].length,"unit(s) in boot.target.");for(const c of n["boot.target"]){const r=await re.syscalls.exec(c.exec,[],[]);if(!r.ok){await ct.print(`Failed to spawn unit '${c.name}'(${c.exec}). Got '${r.error}'. Skipping...`);continue}c.pid=r.value}});
